<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 500">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a0f"/>
      <stop offset="100%" style="stop-color:#12121a"/>
    </linearGradient>
    
    <linearGradient id="commandGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#d97706"/>
    </linearGradient>
    
    <linearGradient id="queryGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    
    <linearGradient id="eventStoreGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#6366f1"/>
    </linearGradient>
    
    <linearGradient id="projectionGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#0891b2"/>
    </linearGradient>
    
    <filter id="glow">
      <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="shadow">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000" flood-opacity="0.4"/>
    </filter>
    
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
    
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
    
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
    
    <marker id="arrowCyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#06b6d4"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="950" height="500" fill="url(#bgGrad)"/>
  
  <!-- Grid -->
  <g opacity="0.03">
    <pattern id="grid" width="30" height="30" patternUnits="userSpaceOnUse">
      <path d="M 30 0 L 0 0 0 30" fill="none" stroke="white" stroke-width="0.5"/>
    </pattern>
    <rect width="950" height="500" fill="url(#grid)"/>
  </g>
  
  <!-- Title -->
  <text x="475" y="40" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-size="24" font-weight="700" fill="white">
    CQRS: Command Query Responsibility Segregation
  </text>
  <text x="475" y="65" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#64748b">
    Separate models for reading and writing â€” optimise each independently
  </text>
  
  <!-- Divider -->
  <line x1="475" y1="100" x2="475" y2="450" stroke="#2d2d3d" stroke-width="2" stroke-dasharray="10,5"/>
  <text x="475" y="95" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">SEPARATION</text>
  
  <!-- WRITE SIDE -->
  <g transform="translate(50, 110)">
    <text x="200" y="0" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#f59e0b">WRITE SIDE</text>
    
    <!-- Commands -->
    <g transform="translate(100, 30)" filter="url(#shadow)">
      <rect width="200" height="120" rx="12" fill="#1a1a24" stroke="#f59e0b" stroke-width="2"/>
      <rect width="200" height="35" rx="12" fill="url(#commandGrad)" opacity="0.2"/>
      <text x="100" y="24" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#f59e0b">COMMANDS</text>
      
      <text x="100" y="55" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">CreateAccount</text>
      <text x="100" y="75" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">DepositMoney</text>
      <text x="100" y="95" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">WithdrawCash</text>
      <text x="100" y="110" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">DeactivateAccount</text>
    </g>
    
    <!-- Arrow to Event Store -->
    <line x1="200" y1="160" x2="200" y2="195" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowOrange)"/>
    
    <!-- Event Store -->
    <g transform="translate(100, 205)" filter="url(#shadow)">
      <rect width="200" height="100" rx="12" fill="#1a1a24" stroke="#8b5cf6" stroke-width="2"/>
      <rect width="200" height="35" rx="12" fill="url(#eventStoreGrad)" opacity="0.2"/>
      <text x="100" y="24" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#8b5cf6">EVENT STORE</text>
      
      <text x="100" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Source of Truth</text>
      <text x="100" y="75" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Append-only</text>
      <text x="100" y="90" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Immutable Events</text>
    </g>
    
    <!-- Consistency label -->
    <g transform="translate(100, 320)">
      <rect width="200" height="35" rx="8" fill="#f59e0b" opacity="0.15"/>
      <text x="100" y="23" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#f59e0b">STRONG CONSISTENCY</text>
    </g>
  </g>
  
  <!-- READ SIDE -->
  <g transform="translate(500, 110)">
    <text x="200" y="0" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#10b981">READ SIDE</text>
    
    <!-- Queries -->
    <g transform="translate(100, 30)" filter="url(#shadow)">
      <rect width="200" height="120" rx="12" fill="#1a1a24" stroke="#10b981" stroke-width="2"/>
      <rect width="200" height="35" rx="12" fill="url(#queryGrad)" opacity="0.2"/>
      <text x="100" y="24" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#10b981">QUERIES</text>
      
      <text x="100" y="55" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">GetBalance</text>
      <text x="100" y="75" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">GetTransactions</text>
      <text x="100" y="95" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">GetMonthlyCashFlow</text>
      <text x="100" y="110" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">GetAuditLog</text>
    </g>
    
    <!-- Arrow from Projection -->
    <line x1="200" y1="195" x2="200" y2="160" stroke="#10b981" stroke-width="2" marker-end="url(#arrowGreen)"/>
    
    <!-- Projections -->
    <g transform="translate(100, 205)" filter="url(#shadow)">
      <rect width="200" height="100" rx="12" fill="#1a1a24" stroke="#06b6d4" stroke-width="2"/>
      <rect width="200" height="35" rx="12" fill="url(#projectionGrad)" opacity="0.2"/>
      <text x="100" y="24" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#06b6d4">PROJECTIONS</text>
      
      <text x="100" y="55" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Read-Optimised Views</text>
      <text x="100" y="75" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Denormalized Data</text>
      <text x="100" y="90" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Fast Queries</text>
    </g>
    
    <!-- Consistency label -->
    <g transform="translate(100, 320)">
      <rect width="200" height="35" rx="8" fill="#10b981" opacity="0.15"/>
      <text x="100" y="23" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#10b981">EVENTUAL CONSISTENCY</text>
    </g>
  </g>
  
  <!-- Sync arrow (Event Store to Projections) -->
  <path d="M350,360 Q475,400 600,360" stroke="#8b5cf6" stroke-width="2" fill="none" stroke-dasharray="6,4" marker-end="url(#arrowPurple)"/>
  <text x="475" y="395" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#8b5cf6">Events sync via Message Bus</text>
  
  <!-- Query Strategies -->
  <g transform="translate(475, 420)">
    <rect x="-200" y="-15" width="400" height="60" rx="10" fill="#1a1a24" stroke="#2d2d3d" stroke-width="1"/>
    <text x="0" y="5" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#64748b">QUERY STRATEGIES</text>
    <text x="0" y="28" text-anchor="middle" font-family="SF Mono, Monaco, monospace" font-size="10" fill="#94a3b8">
      <tspan fill="#06b6d4">Projection</tspan>
      <tspan fill="#64748b"> (fast) | </tspan>
      <tspan fill="#8b5cf6">EventReplay</tspan>
      <tspan fill="#64748b"> (consistent) | </tspan>
      <tspan fill="#10b981">Snapshot</tspan>
      <tspan fill="#64748b"> (balanced)</tspan>
    </text>
  </g>
</svg>
